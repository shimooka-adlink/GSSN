###############################################################################
#
# IAR ANSI C/C++ Compiler V7.80.4.12462/W32 for ARM       17/May/2019  13:32:04
# Copyright 1999-2017 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\driver\uart\drv_uart2_0.c
#    Command line =  
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\driver\uart\drv_uart2_0.c -D
#        __TARGET_ARCH_7_M -D S1C31W74 -D GNSS_GW_SIDE_B -lCN
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\DebugFlashBside\List
#        -lA
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\DebugFlashBside\List
#        --diag_suppress Pe177,Pe111,Pa082 -o
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\DebugFlashBside\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M0+ -e --fpu=None --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        7.5\arm\INC\c\DLib_Config_Normal.h" -I
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\ -I
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\..\..\..\
#        -I "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.5\arm\CMSIS\Include\" -I "C:\Program Files (x86)\IAR
#        Systems\Embedded Workbench 7.5\arm\inc\Epson\" -I
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\..\..\..\..\..\CMSIS\Device\S1C31W74\Include\
#        -I
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\..\..\..\..\..\CMSIS\Driver\Include\
#        -I
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\..\..\..\..\..\sePeriphLibrary\
#        -I
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\..\..\..\..\..\board\S5U1C31W74T1\
#        -I
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\..\..\..\..\..\USBStack\INC\
#        -I
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\..\..\..\include\
#        -Ol
#    Locale       =  Japanese_Japan.932
#    List file    =  
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\DebugFlashBside\List\drv_uart2_0.lst
#    Object file  =  
#        C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\board\S5U1C31W74T1\IAR\DebugFlashBside\Obj\drv_uart2_0.o
#
###############################################################################

C:\GNSS\Software\rJ104_rc2\source\GNSS_GW\driver\uart\drv_uart2_0.c
      1          
      2          /**
      3            ******************************************************************************
      4            * @file    uart2_0.c
      5            * @author  コア
      6            * @version V1.0
      7            * @date    2017.10.2
      8            * @brief   P16, P17を使用してUART CH0でデータの送受信を行う
      9            *          受信バッファは5200バイトとする。
     10            ******************************************************************************
     11            $Id: drv_uart2_0.c 221 2018-07-17 06:38:06Z shitaoka $
     12            * @attention
     13            *
     14            *  PORT
     15            *    P16        : USIN
     16            *    P17        : USOUT
     17            *
     18            *  ClkSrc       : seCLG_IOSC
     19            *  ClkDivider   : seUART2_IOSC_CLKDIV_1
     20            *               : seUART2_BAUD_RATE_115200
     21            *
     22            *  受信バッファ : DRV_UART0_RECV_BUFF_MAX
     23            *
     24            *****************************************************************************
     25          */ 
     26          
     27          
     28          /**
     29            * @}
     30            */ 
     31          
     32          #include <string.h>
     33          #include <stdio.h>
     34          #include "board.h"

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void NVIC_EnableIRQ(IRQn_Type)
   \                     NVIC_EnableIRQ: (+1)
   \   00000000   0xB500             PUSH     {LR}
   \   00000002   0xB240             SXTB     R0,R0
   \   00000004   0x2800             CMP      R0,#+0
   \   00000006   0xD405             BMI      ??NVIC_EnableIRQ_0
   \   00000008   0x2101             MOVS     R1,#+1
   \   0000000A   0x06C0             LSLS     R0,R0,#+27       ;; ZeroExtS R0,R0,#+27,#+27
   \   0000000C   0x0EC0             LSRS     R0,R0,#+27
   \   0000000E   0x4081             LSLS     R1,R1,R0
   \   00000010   0x....             LDR      R0,??DataTable8  ;; 0xe000e100
   \   00000012   0x6001             STR      R1,[R0, #+0]
   \                     ??NVIC_EnableIRQ_0: (+1)
   \   00000014   0xBD00             POP      {PC}             ;; return

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void NVIC_SetPriority(IRQn_Type, uint32_t)
   \                     NVIC_SetPriority: (+1)
   \   00000000   0xB5F0             PUSH     {R4-R7,LR}
   \   00000002   0xB240             SXTB     R0,R0
   \   00000004   0x2800             CMP      R0,#+0
   \   00000006   0xD41B             BMI      ??NVIC_SetPriority_0
   \   00000008   0x....             LDR      R2,??DataTable8_1  ;; 0xe000e400
   \   0000000A   0xB240             SXTB     R0,R0
   \   0000000C   0x0883             LSRS     R3,R0,#+2
   \   0000000E   0x2404             MOVS     R4,#+4
   \   00000010   0x4363             MULS     R3,R4,R3
   \   00000012   0x58D2             LDR      R2,[R2, R3]
   \   00000014   0x23FF             MOVS     R3,#+255
   \   00000016   0x0784             LSLS     R4,R0,#+30       ;; ZeroExtS R4,R0,#+30,#+30
   \   00000018   0x0FA4             LSRS     R4,R4,#+30
   \   0000001A   0x2508             MOVS     R5,#+8
   \   0000001C   0x436C             MULS     R4,R5,R4
   \   0000001E   0x40A3             LSLS     R3,R3,R4
   \   00000020   0x439A             BICS     R2,R2,R3
   \   00000022   0x0189             LSLS     R1,R1,#+6
   \   00000024   0xB2C9             UXTB     R1,R1
   \   00000026   0x0783             LSLS     R3,R0,#+30       ;; ZeroExtS R3,R0,#+30,#+30
   \   00000028   0x0F9B             LSRS     R3,R3,#+30
   \   0000002A   0x2408             MOVS     R4,#+8
   \   0000002C   0x4363             MULS     R3,R4,R3
   \   0000002E   0x4099             LSLS     R1,R1,R3
   \   00000030   0x4311             ORRS     R1,R1,R2
   \   00000032   0x....             LDR      R2,??DataTable8_1  ;; 0xe000e400
   \   00000034   0xB240             SXTB     R0,R0
   \   00000036   0x0880             LSRS     R0,R0,#+2
   \   00000038   0x2304             MOVS     R3,#+4
   \   0000003A   0x4358             MULS     R0,R3,R0
   \   0000003C   0x5011             STR      R1,[R2, R0]
   \   0000003E   0xE020             B        ??NVIC_SetPriority_1
   \                     ??NVIC_SetPriority_0: (+1)
   \   00000040   0x....             LDR      R3,??DataTable8_2  ;; 0xe000ed1c
   \   00000042   0xB240             SXTB     R0,R0
   \   00000044   0x0702             LSLS     R2,R0,#+28       ;; ZeroExtS R2,R0,#+28,#+28
   \   00000046   0x0F12             LSRS     R2,R2,#+28
   \   00000048   0x3A08             SUBS     R2,R2,#+8
   \   0000004A   0x0892             LSRS     R2,R2,#+2
   \   0000004C   0x2404             MOVS     R4,#+4
   \   0000004E   0x4362             MULS     R2,R4,R2
   \   00000050   0x....             LDR      R4,??DataTable8_2  ;; 0xe000ed1c
   \   00000052   0xB240             SXTB     R0,R0
   \   00000054   0x0705             LSLS     R5,R0,#+28       ;; ZeroExtS R5,R0,#+28,#+28
   \   00000056   0x0F2D             LSRS     R5,R5,#+28
   \   00000058   0x3D08             SUBS     R5,R5,#+8
   \   0000005A   0x08AD             LSRS     R5,R5,#+2
   \   0000005C   0x2604             MOVS     R6,#+4
   \   0000005E   0x4375             MULS     R5,R6,R5
   \   00000060   0x5964             LDR      R4,[R4, R5]
   \   00000062   0x25FF             MOVS     R5,#+255
   \   00000064   0x0786             LSLS     R6,R0,#+30       ;; ZeroExtS R6,R0,#+30,#+30
   \   00000066   0x0FB6             LSRS     R6,R6,#+30
   \   00000068   0x2708             MOVS     R7,#+8
   \   0000006A   0x437E             MULS     R6,R7,R6
   \   0000006C   0x40B5             LSLS     R5,R5,R6
   \   0000006E   0x43AC             BICS     R4,R4,R5
   \   00000070   0x0189             LSLS     R1,R1,#+6
   \   00000072   0xB2C9             UXTB     R1,R1
   \   00000074   0x0780             LSLS     R0,R0,#+30       ;; ZeroExtS R0,R0,#+30,#+30
   \   00000076   0x0F80             LSRS     R0,R0,#+30
   \   00000078   0x2508             MOVS     R5,#+8
   \   0000007A   0x4368             MULS     R0,R5,R0
   \   0000007C   0x4081             LSLS     R1,R1,R0
   \   0000007E   0x4321             ORRS     R1,R1,R4
   \   00000080   0x5099             STR      R1,[R3, R2]
   \                     ??NVIC_SetPriority_1: (+1)
   \   00000082   0xBDF0             POP      {R4-R7,PC}       ;; return
     35          #include "system_manager.h"
     36          #include "se_common.h"
     37          #include "se_uart2.h"
     38          #include "man_usb.h"
     39          
     40          
     41          
     42          #pragma section = "DRV_PRG_BLOCK"
     43          
     44          
     45          /************************************************************************/
     46          /* declaration of structure                                             */
     47          /************************************************************************/
     48          
     49          #define	DRV_UART0_RECV_BUFF_MAX		5500
     50          
     51          // 個別情報
     52          typedef struct _drv_uart0_recv_info_t {
     53          	uint8_t		rcv_buff[DRV_UART0_RECV_BUFF_MAX];
     54          	uint32_t	length;
     55          	uint32_t	write_p;
     56          	uint32_t	read_p;
     57          	uint32_t	error;
     58          } drv_uart0_recv_info_t;
     59          
     60          typedef struct _drv_uart0_work_t {
     61          	drv_uart0_recv_info_t	recv_info;
     62          } drv_uart0_work_t;
     63          
     64          
     65          /************************************************************************/
     66          /* definition of variables                                              */
     67          /************************************************************************/
     68          

   \                                 In section .bss, align 4
     69          static drv_uart0_work_t		drv_uart0_work;			// UART CH0用変数
   \                     drv_uart0_work:
   \   00000000                      DS8 5516
     70          
     71          
     72          //  Structure for peripheral library

   \                                 In section .bss, align 4
     73          static seUART2_InitTypeDef InitStruct;
   \                     InitStruct:
   \   00000000                      DS8 8
     74          
     75          
     76          
     77          /********************************************************************/
     78          /*!
     79           * \name	drv_uart2_0_init
     80           * \brief	UART Ch0 の初期化
     81           * \param	なし
     82           * \return  0: 正常
     83           * \note	
     84           */
     85          /********************************************************************/

   \                                 In section .text, align 2, keep-with-next
     86          int drv_uart2_0_init( void )  
     87          {
   \                     drv_uart2_0_init: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
     88          
     89          	memset( &drv_uart0_work, 0, sizeof( drv_uart0_work_t ) );
   \   00000002   0x....             LDR      R1,??DataTable8_3  ;; 0x158c
   \   00000004   0x2200             MOVS     R2,#+0
   \   00000006   0x....             LDR      R4,??DataTable8_4
   \   00000008   0x0020             MOVS     R0,R4
   \   0000000A   0x.... 0x....      BL       __aeabi_memset
     90          
     91          	memset( &InitStruct, 0, sizeof( seUART2_InitTypeDef ) );
   \   0000000E   0x2106             MOVS     R1,#+6
   \   00000010   0x2200             MOVS     R2,#+0
   \   00000012   0x....             LDR      R4,??DataTable8_5
   \   00000014   0x0020             MOVS     R0,R4
   \   00000016   0x.... 0x....      BL       __aeabi_memset
     92            
     93          #ifdef OSC3_ENABLE
     94          	InitStruct.ClkSrc = seCLG_OSC3; 
   \   0000001A   0x2002             MOVS     R0,#+2
   \   0000001C   0x....             LDR      R1,??DataTable8_5
   \   0000001E   0x7008             STRB     R0,[R1, #+0]
     95          	InitStruct.ClkDivider = seUART2_OSC3_CLKDIV_1;  
   \   00000020   0x2000             MOVS     R0,#+0
   \   00000022   0x....             LDR      R1,??DataTable8_5
   \   00000024   0x8048             STRH     R0,[R1, #+2]
     96          #else
     97          	InitStruct.ClkSrc = seCLG_IOSC; 
     98          	InitStruct.ClkDivider = seUART2_IOSC_CLKDIV_1;  
     99          #endif
    100          	InitStruct.Mode.reg_b.puen = seUART2_MOD_PUEN_ENABLE;
   \   00000026   0x....             LDR      R0,??DataTable8_5
   \   00000028   0x8880             LDRH     R0,[R0, #+4]
   \   0000002A   0x2140             MOVS     R1,#+64
   \   0000002C   0x4301             ORRS     R1,R1,R0
   \   0000002E   0x....             LDR      R0,??DataTable8_5
   \   00000030   0x8081             STRH     R1,[R0, #+4]
    101          	InitStruct.Mode.reg_b.chln = seUART2_MOD_CHLN_8BIT;
   \   00000032   0x....             LDR      R0,??DataTable8_5
   \   00000034   0x8880             LDRH     R0,[R0, #+4]
   \   00000036   0x2108             MOVS     R1,#+8
   \   00000038   0x4301             ORRS     R1,R1,R0
   \   0000003A   0x....             LDR      R0,??DataTable8_5
   \   0000003C   0x8081             STRH     R1,[R0, #+4]
    102          	InitStruct.Mode.reg_b.stpb = seUART2_MOD_STPB_1BIT;
   \   0000003E   0x....             LDR      R0,??DataTable8_5
   \   00000040   0x8880             LDRH     R0,[R0, #+4]
   \   00000042   0x....             LDR      R1,??DataTable8_6  ;; 0xfffe
   \   00000044   0x4001             ANDS     R1,R1,R0
   \   00000046   0x....             LDR      R0,??DataTable8_5
   \   00000048   0x8081             STRH     R1,[R0, #+4]
    103          	InitStruct.Mode.reg_b.pren = seUART2_MOD_PREN_NO_PARITY;
   \   0000004A   0x....             LDR      R0,??DataTable8_5
   \   0000004C   0x8880             LDRH     R0,[R0, #+4]
   \   0000004E   0x....             LDR      R1,??DataTable8_7  ;; 0xfffb
   \   00000050   0x4001             ANDS     R1,R1,R0
   \   00000052   0x....             LDR      R0,??DataTable8_5
   \   00000054   0x8081             STRH     R1,[R0, #+4]
    104          	InitStruct.Mode.reg_b.prmd = seUART2_MOD_PRMD_EVEN;
   \   00000056   0x....             LDR      R0,??DataTable8_5
   \   00000058   0x8880             LDRH     R0,[R0, #+4]
   \   0000005A   0x....             LDR      R1,??DataTable8_8  ;; 0xfffd
   \   0000005C   0x4001             ANDS     R1,R1,R0
   \   0000005E   0x....             LDR      R0,??DataTable8_5
   \   00000060   0x8081             STRH     R1,[R0, #+4]
    105          	InitStruct.Mode.reg_b.irmd = seUART2_MOD_IRMD_NO_IRDA;
   \   00000062   0x....             LDR      R0,??DataTable8_5
   \   00000064   0x8880             LDRH     R0,[R0, #+4]
   \   00000066   0x....             LDR      R1,??DataTable8_9  ;; 0xffef
   \   00000068   0x4001             ANDS     R1,R1,R0
   \   0000006A   0x....             LDR      R0,??DataTable8_5
   \   0000006C   0x8081             STRH     R1,[R0, #+4]
    106          
    107          	seUART2_Init( &UART2_CH0, &InitStruct );
   \   0000006E   0x....             LDR      R1,??DataTable8_5
   \   00000070   0x....             LDR      R0,??DataTable8_10
   \   00000072   0x.... 0x....      BL       seUART2_Init
    108          	seUART2_SetBaudRate( UART2_CH0.UARTx, seUART2_BAUD_RATE_115200 );
   \   00000076   0x21E1             MOVS     R1,#+225
   \   00000078   0x0249             LSLS     R1,R1,#+9        ;; #+115200
   \   0000007A   0x....             LDR      R0,??DataTable8_10
   \   0000007C   0x6800             LDR      R0,[R0, #+0]
   \   0000007E   0x.... 0x....      BL       seUART2_SetBaudRate
    109          	seUART2_Enable( UART2_CH0.UARTx );
   \   00000082   0x....             LDR      R0,??DataTable8_10
   \   00000084   0x6800             LDR      R0,[R0, #+0]
   \   00000086   0x.... 0x....      BL       seUART2_Enable
    110          
    111          	seUART2_EnableInt( UART2_CH0.UARTx, seUART2_RB1FIE_INT );
   \   0000008A   0x2102             MOVS     R1,#+2
   \   0000008C   0x....             LDR      R0,??DataTable8_10
   \   0000008E   0x6800             LDR      R0,[R0, #+0]
   \   00000090   0x.... 0x....      BL       seUART2_EnableInt
    112          	seUART2_EnableInt( UART2_CH0.UARTx, seUART2_RB2FIE_INT );
   \   00000094   0x2104             MOVS     R1,#+4
   \   00000096   0x....             LDR      R0,??DataTable8_10
   \   00000098   0x6800             LDR      R0,[R0, #+0]
   \   0000009A   0x.... 0x....      BL       seUART2_EnableInt
    113          
    114          	NVIC_SetPriority( UART2_0_IRQn, 1 );  //  Set interrupt level
   \   0000009E   0x2101             MOVS     R1,#+1
   \   000000A0   0x2006             MOVS     R0,#+6
   \   000000A2   0x.... 0x....      BL       NVIC_SetPriority
    115          	NVIC_EnableIRQ( UART2_0_IRQn );
   \   000000A6   0x2006             MOVS     R0,#+6
   \   000000A8   0x.... 0x....      BL       NVIC_EnableIRQ
    116          
    117          	return 0;
   \   000000AC   0x2000             MOVS     R0,#+0
   \   000000AE   0xBD10             POP      {R4,PC}          ;; return
    118          } 
    119          
    120          
    121          /********************************************************************/
    122          /*!
    123           * \name	drv_uart2_0_stop
    124           * \brief	UART Ch0 の停止
    125           * \param	なし
    126           * \return  0: 正常
    127           * \note	動作クロックの供給を停止してUARTチャネルを禁止します
    128           */
    129          /********************************************************************/

   \                                 In section .text, align 2, keep-with-next
    130          void drv_uart2_0_stop( void )  
    131          {
   \                     drv_uart2_0_stop: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    132          	seUART2_Disable( UART2_CH0.UARTx );						// UART CH0 割り込みを無効にする
   \   00000002   0x....             LDR      R0,??DataTable8_10
   \   00000004   0x6800             LDR      R0,[R0, #+0]
   \   00000006   0x.... 0x....      BL       seUART2_Disable
    133          }
   \   0000000A   0xBD01             POP      {R0,PC}          ;; return
    134          
    135          /********************************************************************/
    136          /*!
    137           * \name	drv_uart2_0_start
    138           * \brief	UART Ch0 の再開
    139           * \param	なし
    140           * \return  0: 正常
    141           * \note	動作クロックを供給してUARTチャネルを許可します。
    142           */
    143          /********************************************************************/

   \                                 In section .text, align 2, keep-with-next
    144          void drv_uart2_0_start( void )  
    145          {
   \                     drv_uart2_0_start: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    146          	seUART2_Enable( UART2_CH0.UARTx );							// UART CH0 割り込みを有効にする
   \   00000002   0x....             LDR      R0,??DataTable8_10
   \   00000004   0x6800             LDR      R0,[R0, #+0]
   \   00000006   0x.... 0x....      BL       seUART2_Enable
    147          }
   \   0000000A   0xBD01             POP      {R0,PC}          ;; return
    148          
    149          
    150          /********************************************************************/
    151          /*!
    152           * \name	drv_uart2_0_send
    153           * \brief	データをUART CH0経由で送信します。
    154           * \param	buff   : 送信データ
    155           *			length : データ長
    156           * \return   0: 正常
    157           *			-1: 異常
    158           * \note	送信が完了するまで待ちます。
    159           */
    160          /********************************************************************/

   \                                 In section .text, align 2, keep-with-next
    161          int32_t drv_uart2_0_send( uint8_t *buff , uint32_t length )  
    162          {
   \                     drv_uart2_0_send: (+1)
   \   00000000   0xB5F8             PUSH     {R3-R7,LR}
   \   00000002   0x0007             MOVS     R7,R0
   \   00000004   0x000E             MOVS     R6,R1
    163          	uint32_t	send_len;
    164          	int32_t		ret=-1;
   \   00000006   0x2400             MOVS     R4,#+0
   \   00000008   0x43E4             MVNS     R4,R4            ;; #-1
    165          
    166          	if ( (buff!=NULL) && (length>0) ) {
   \   0000000A   0x2F00             CMP      R7,#+0
   \   0000000C   0xD017             BEQ      ??drv_uart2_0_send_0
   \   0000000E   0x2E00             CMP      R6,#+0
   \   00000010   0xD015             BEQ      ??drv_uart2_0_send_0
    167          		send_len = seUART2_Send( UART2_CH0.UARTx, buff, length );
   \   00000012   0x0032             MOVS     R2,R6
   \   00000014   0x0039             MOVS     R1,R7
   \   00000016   0x....             LDR      R0,??DataTable8_10
   \   00000018   0x6800             LDR      R0,[R0, #+0]
   \   0000001A   0x.... 0x....      BL       seUART2_Send
   \   0000001E   0x0005             MOVS     R5,R0
    168                          if((usb_log_flag & LOG_FLAG_LTE) || (usb_console_flag == 1))
   \   00000020   0x....             LDR      R0,??DataTable8_11
   \   00000022   0x7800             LDRB     R0,[R0, #+0]
   \   00000024   0x0780             LSLS     R0,R0,#+30
   \   00000026   0xD403             BMI      ??drv_uart2_0_send_1
   \   00000028   0x....             LDR      R0,??DataTable8_12
   \   0000002A   0x6800             LDR      R0,[R0, #+0]
   \   0000002C   0x2801             CMP      R0,#+1
   \   0000002E   0xD103             BNE      ??drv_uart2_0_send_2
    169                          {
    170                           sysmgr_log(buff,length);
   \                     ??drv_uart2_0_send_1: (+1)
   \   00000030   0x0031             MOVS     R1,R6
   \   00000032   0x0038             MOVS     R0,R7
   \   00000034   0x.... 0x....      BL       sysmgr_log
    171                          }
    172          
    173          		// 全て送信できていたら正常
    174          		if (send_len == length) {
   \                     ??drv_uart2_0_send_2: (+1)
   \   00000038   0x42B5             CMP      R5,R6
   \   0000003A   0xD100             BNE      ??drv_uart2_0_send_0
    175          			ret=0;
   \   0000003C   0x2400             MOVS     R4,#+0
    176          		}
    177          	}
    178          	return ret;
   \                     ??drv_uart2_0_send_0: (+1)
   \   0000003E   0x0020             MOVS     R0,R4
   \   00000040   0xBDF2             POP      {R1,R4-R7,PC}    ;; return
    179          } 
    180          
    181          
    182          
    183          /********************************************************************/
    184          /*!
    185           * \name	UART2_0_GetChar
    186           * \brief	UART CH0１文字受信
    187           * \param	なし
    188           * \return  -1: 受信データなし
    189           *          以外: 受信データ
    190           * \note	
    191           */
    192          /********************************************************************/

   \                                 In section .text, align 2, keep-with-next
    193          int32_t UART2_0_GetChar(void)
    194          {
   \                     UART2_0_GetChar: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
    195          	int32_t		ret=-1;
   \   00000002   0x2400             MOVS     R4,#+0
   \   00000004   0x43E4             MVNS     R4,R4            ;; #-1
    196          	uint32_t	data;
    197          	uint32_t	read_next;
    198          
    199          	if (drv_uart0_work.recv_info.read_p != drv_uart0_work.recv_info.write_p) {
   \   00000006   0x....             LDR      R0,??DataTable8_13
   \   00000008   0x6800             LDR      R0,[R0, #+0]
   \   0000000A   0x....             LDR      R1,??DataTable8_14
   \   0000000C   0x6809             LDR      R1,[R1, #+0]
   \   0000000E   0x4288             CMP      R0,R1
   \   00000010   0xD01B             BEQ      ??UART2_0_GetChar_0
    200          		read_next = drv_uart0_work.recv_info.read_p + 1;
   \   00000012   0x....             LDR      R0,??DataTable8_13
   \   00000014   0x6805             LDR      R5,[R0, #+0]
   \   00000016   0x1C6D             ADDS     R5,R5,#+1
    201          		if (read_next >= DRV_UART0_RECV_BUFF_MAX) {
   \   00000018   0x....             LDR      R0,??DataTable8_15  ;; 0x157c
   \   0000001A   0x4285             CMP      R5,R0
   \   0000001C   0xD300             BCC      ??UART2_0_GetChar_1
    202          			read_next = 0;
   \   0000001E   0x2500             MOVS     R5,#+0
    203          		}
    204          		data = (uint32_t)drv_uart0_work.recv_info.rcv_buff[drv_uart0_work.recv_info.read_p];
   \                     ??UART2_0_GetChar_1: (+1)
   \   00000020   0x....             LDR      R0,??DataTable8_4
   \   00000022   0x....             LDR      R1,??DataTable8_13
   \   00000024   0x6809             LDR      R1,[R1, #+0]
   \   00000026   0x5C44             LDRB     R4,[R0, R1]
    205          		ret = (int32_t)data;
    206                       if((usb_log_flag  & LOG_FLAG_LTE) || (usb_console_flag == 1))
   \   00000028   0x....             LDR      R0,??DataTable8_11
   \   0000002A   0x7800             LDRB     R0,[R0, #+0]
   \   0000002C   0x0780             LSLS     R0,R0,#+30
   \   0000002E   0xD403             BMI      ??UART2_0_GetChar_2
   \   00000030   0x....             LDR      R0,??DataTable8_12
   \   00000032   0x6800             LDR      R0,[R0, #+0]
   \   00000034   0x2801             CMP      R0,#+1
   \   00000036   0xD106             BNE      ??UART2_0_GetChar_3
    207                       {
    208                         uint8_t data_char = (uint8_t) ret;
   \                     ??UART2_0_GetChar_2: (+1)
   \   00000038   0x0020             MOVS     R0,R4
   \   0000003A   0x4669             MOV      R1,SP
   \   0000003C   0x7008             STRB     R0,[R1, #+0]
    209                        sysmgr_log(&data_char,1);
   \   0000003E   0x2101             MOVS     R1,#+1
   \   00000040   0x4668             MOV      R0,SP
   \   00000042   0x.... 0x....      BL       sysmgr_log
    210                       }
    211          		drv_uart0_work.recv_info.read_p = read_next;
   \                     ??UART2_0_GetChar_3: (+1)
   \   00000046   0x....             LDR      R0,??DataTable8_13
   \   00000048   0x6005             STR      R5,[R0, #+0]
    212          	}
    213          	
    214          	return ret;
   \                     ??UART2_0_GetChar_0: (+1)
   \   0000004A   0x0020             MOVS     R0,R4
   \   0000004C   0xBD32             POP      {R1,R4,R5,PC}    ;; return
    215          }
    216          
    217          
    218          /********************************************************************/
    219          /*!
    220           * \name	UART2_0_CheckErrorCount
    221           * \brief	UART CH0受信の取りこぼし回数取得
    222           * \param	なし
    223           * \return  取りこぼし発生回数
    224           * \note	
    225           */
    226          /********************************************************************/

   \                                 In section .text, align 2, keep-with-next
    227          uint32_t UART2_0_CheckErrorCount(void)
    228          {
    229          	uint32_t		count = drv_uart0_work.recv_info.error;
   \                     UART2_0_CheckErrorCount: (+1)
   \   00000000   0x....             LDR      R0,??DataTable8_16
   \   00000002   0x6800             LDR      R0,[R0, #+0]
    230          	drv_uart0_work.recv_info.error = 0;
   \   00000004   0x2100             MOVS     R1,#+0
   \   00000006   0x....             LDR      R2,??DataTable8_16
   \   00000008   0x6011             STR      R1,[R2, #+0]
    231          	
    232          	return count;
   \   0000000A   0x4770             BX       LR               ;; return
    233          }
    234          
    235          
    236          /********************************************************************/
    237          /*!
    238           * \name	PRG_UART2_0_IRQHandler
    239           * \brief	UART CH0 受信割り込み処理
    240           * \param	
    241           * \return  
    242           * \note	受信バッファに受信データを登録する。
    243           *          受信バッファがFULL時はerrorを+1する。
    244           */
    245          /********************************************************************/

   \                                 In section .text, align 2, keep-with-next
    246          void UART2_0_IRQHandler( void )
    247          {
   \                     UART2_0_IRQHandler: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    248          	uint8_t		buff;
    249          	int32_t		write_p;
    250          	uint32_t	write_next;
    251          
    252          	// UART CH0 受信割り込み
    253          	if ( seUART2_GetIntFlag( UART2_0, seUART2_RB2FIE_INT ) ) {
   \   00000002   0x2104             MOVS     R1,#+4
   \   00000004   0x....             LDR      R0,??DataTable8_17  ;; 0x40000380
   \   00000006   0x.... 0x....      BL       seUART2_GetIntFlag
   \   0000000A   0x2800             CMP      R0,#+0
   \   0000000C   0xD018             BEQ      ??UART2_0_IRQHandler_0
    254          		buff = UART2_0->RXD;
   \   0000000E   0x....             LDR      R0,??DataTable8_18  ;; 0x4000038a
   \   00000010   0x8800             LDRH     R0,[R0, #+0]
    255          
    256          		write_next = drv_uart0_work.recv_info.write_p + 1;
   \   00000012   0x....             LDR      R1,??DataTable8_14
   \   00000014   0x6809             LDR      R1,[R1, #+0]
   \   00000016   0x1C49             ADDS     R1,R1,#+1
    257          		if (write_next >= DRV_UART0_RECV_BUFF_MAX) {
   \   00000018   0x....             LDR      R2,??DataTable8_15  ;; 0x157c
   \   0000001A   0x4291             CMP      R1,R2
   \   0000001C   0xD300             BCC      ??UART2_0_IRQHandler_1
    258          			write_next = 0;
   \   0000001E   0x2100             MOVS     R1,#+0
    259          		}
    260          
    261          		// バッファFULLで無い場合は登録
    262          		if ( drv_uart0_work.recv_info.read_p != write_next ) {
   \                     ??UART2_0_IRQHandler_1: (+1)
   \   00000020   0x....             LDR      R2,??DataTable8_13
   \   00000022   0x6812             LDR      R2,[R2, #+0]
   \   00000024   0x428A             CMP      R2,R1
   \   00000026   0xD006             BEQ      ??UART2_0_IRQHandler_2
    263          			drv_uart0_work.recv_info.rcv_buff[drv_uart0_work.recv_info.write_p] = buff;
   \   00000028   0x....             LDR      R2,??DataTable8_4
   \   0000002A   0x....             LDR      R3,??DataTable8_14
   \   0000002C   0x681B             LDR      R3,[R3, #+0]
   \   0000002E   0x54D0             STRB     R0,[R2, R3]
    264          			drv_uart0_work.recv_info.write_p = write_next;
   \   00000030   0x....             LDR      R0,??DataTable8_14
   \   00000032   0x6001             STR      R1,[R0, #+0]
   \   00000034   0xE004             B        ??UART2_0_IRQHandler_0
    265          		}
    266          
    267          		// バッファFULL時、エラー発生
    268          		else {
    269          			drv_uart0_work.recv_info.error++;
   \                     ??UART2_0_IRQHandler_2: (+1)
   \   00000036   0x....             LDR      R0,??DataTable8_16
   \   00000038   0x6800             LDR      R0,[R0, #+0]
   \   0000003A   0x1C40             ADDS     R0,R0,#+1
   \   0000003C   0x....             LDR      R1,??DataTable8_16
   \   0000003E   0x6008             STR      R0,[R1, #+0]
    270          		}
    271          	}
    272          
    273          	buff = UART2_0->RXD;
   \                     ??UART2_0_IRQHandler_0: (+1)
   \   00000040   0x....             LDR      R0,??DataTable8_18  ;; 0x4000038a
   \   00000042   0x8800             LDRH     R0,[R0, #+0]
    274          
    275          	write_next = drv_uart0_work.recv_info.write_p + 1;
   \   00000044   0x....             LDR      R1,??DataTable8_14
   \   00000046   0x6809             LDR      R1,[R1, #+0]
   \   00000048   0x1C49             ADDS     R1,R1,#+1
    276          	if (write_next >= DRV_UART0_RECV_BUFF_MAX) {
   \   0000004A   0x....             LDR      R2,??DataTable8_15  ;; 0x157c
   \   0000004C   0x4291             CMP      R1,R2
   \   0000004E   0xD300             BCC      ??UART2_0_IRQHandler_3
    277          		write_next = 0;
   \   00000050   0x2100             MOVS     R1,#+0
    278          	}
    279          
    280          	// バッファFULLで無い場合は登録
    281          	if ( drv_uart0_work.recv_info.read_p != write_next ) {
   \                     ??UART2_0_IRQHandler_3: (+1)
   \   00000052   0x....             LDR      R2,??DataTable8_13
   \   00000054   0x6812             LDR      R2,[R2, #+0]
   \   00000056   0x428A             CMP      R2,R1
   \   00000058   0xD006             BEQ      ??UART2_0_IRQHandler_4
    282          		drv_uart0_work.recv_info.rcv_buff[drv_uart0_work.recv_info.write_p] = buff;
   \   0000005A   0x....             LDR      R2,??DataTable8_4
   \   0000005C   0x....             LDR      R3,??DataTable8_14
   \   0000005E   0x681B             LDR      R3,[R3, #+0]
   \   00000060   0x54D0             STRB     R0,[R2, R3]
    283          		drv_uart0_work.recv_info.write_p = write_next;
   \   00000062   0x....             LDR      R0,??DataTable8_14
   \   00000064   0x6001             STR      R1,[R0, #+0]
   \   00000066   0xE004             B        ??UART2_0_IRQHandler_5
    284          	}
    285          
    286          	// バッファFULL時、エラー発生
    287          	else {
    288          		drv_uart0_work.recv_info.error++;
   \                     ??UART2_0_IRQHandler_4: (+1)
   \   00000068   0x....             LDR      R0,??DataTable8_16
   \   0000006A   0x6800             LDR      R0,[R0, #+0]
   \   0000006C   0x1C40             ADDS     R0,R0,#+1
   \   0000006E   0x....             LDR      R1,??DataTable8_16
   \   00000070   0x6008             STR      R0,[R1, #+0]
    289          	}
    290          
    291          //	seUART2_DisableInt( UART2_0, seUART2_RB1FIE_INT );
    292          //	seUART2_DisableInt( UART2_0, seUART2_RB2FIE_INT );
    293          }
   \                     ??UART2_0_IRQHandler_5: (+1)
   \   00000072   0xBD01             POP      {R0,PC}          ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8:
   \   00000000   0xE000E100         DC32     0xe000e100

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_1:
   \   00000000   0xE000E400         DC32     0xe000e400

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_2:
   \   00000000   0xE000ED1C         DC32     0xe000ed1c

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_3:
   \   00000000   0x0000158C         DC32     0x158c

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_4:
   \   00000000   0x........         DC32     drv_uart0_work

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_5:
   \   00000000   0x........         DC32     InitStruct

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_6:
   \   00000000   0x0000FFFE         DC32     0xfffe

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_7:
   \   00000000   0x0000FFFB         DC32     0xfffb

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_8:
   \   00000000   0x0000FFFD         DC32     0xfffd

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_9:
   \   00000000   0x0000FFEF         DC32     0xffef

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_10:
   \   00000000   0x........         DC32     UART2_CH0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_11:
   \   00000000   0x........         DC32     usb_log_flag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_12:
   \   00000000   0x........         DC32     usb_console_flag

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_13:
   \   00000000   0x........         DC32     drv_uart0_work+0x1584

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_14:
   \   00000000   0x........         DC32     drv_uart0_work+0x1580

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_15:
   \   00000000   0x0000157C         DC32     0x157c

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_16:
   \   00000000   0x........         DC32     drv_uart0_work+0x1588

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_17:
   \   00000000   0x40000380         DC32     0x40000380

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8_18:
   \   00000000   0x4000038A         DC32     0x4000038a

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       4   NVIC_EnableIRQ
      20   NVIC_SetPriority
       0   UART2_0_CheckErrorCount
      16   UART2_0_GetChar
        16   -> sysmgr_log
       8   UART2_0_IRQHandler
         8   -> seUART2_GetIntFlag
       8   drv_uart2_0_init
         8   -> NVIC_EnableIRQ
         8   -> NVIC_SetPriority
         8   -> __aeabi_memset
         8   -> seUART2_Enable
         8   -> seUART2_EnableInt
         8   -> seUART2_Init
         8   -> seUART2_SetBaudRate
      24   drv_uart2_0_send
        24   -> seUART2_Send
        24   -> sysmgr_log
       8   drv_uart2_0_start
         8   -> seUART2_Enable
       8   drv_uart2_0_stop
         8   -> seUART2_Disable


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable8
       4  ??DataTable8_1
       4  ??DataTable8_10
       4  ??DataTable8_11
       4  ??DataTable8_12
       4  ??DataTable8_13
       4  ??DataTable8_14
       4  ??DataTable8_15
       4  ??DataTable8_16
       4  ??DataTable8_17
       4  ??DataTable8_18
       4  ??DataTable8_2
       4  ??DataTable8_3
       4  ??DataTable8_4
       4  ??DataTable8_5
       4  ??DataTable8_6
       4  ??DataTable8_7
       4  ??DataTable8_8
       4  ??DataTable8_9
       8  InitStruct
      22  NVIC_EnableIRQ
     132  NVIC_SetPriority
      12  UART2_0_CheckErrorCount
      78  UART2_0_GetChar
     116  UART2_0_IRQHandler
    5516  drv_uart0_work
     176  drv_uart2_0_init
      66  drv_uart2_0_send
      12  drv_uart2_0_start
      12  drv_uart2_0_stop

 
 5 524 bytes in section .bss
   702 bytes in section .text
 
   702 bytes of CODE memory
 5 524 bytes of DATA memory

Errors: none
Warnings: 2
